<div class="modal-overlay">
  <div class="modal-container">
    <div class="modal-header">
      <h2>Editar anuncio</h2>
      <button type="button" class="close-button" (click)="close()">&times;</button>
    </div>
    <form (ngSubmit)="submit()" *ngIf="adCopy">
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Título</mat-label>
        <input matInput [(ngModel)]="adCopy.title" name="title" required minlength="3" maxlength="100" />
      </mat-form-field>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Descripción</mat-label>
        <textarea matInput [(ngModel)]="adCopy.description" name="description" required minlength="10"
          maxlength="1000"></textarea>
      </mat-form-field>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Precio</mat-label>
        <input matInput type="number" [(ngModel)]="adCopy.price" name="price" required min="1" />
      </mat-form-field>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Género</mat-label>
        <mat-select [(ngModel)]="adCopy.gender" name="gender">
          <mat-option value="Macho">Macho</mat-option>
          <mat-option value="Hembra">Hembra</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Fecha de nacimiento</mat-label>
        <input matInput [matDatepicker]="birthdatePicker" [(ngModel)]="adCopy.birthdate" name="birthdate" required />
        <mat-datepicker-toggle matSuffix [for]="birthdatePicker"></mat-datepicker-toggle>
        <mat-datepicker #birthdatePicker></mat-datepicker>
      </mat-form-field>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Ubicación</mat-label>
        <mat-select [(ngModel)]="adCopy.location" name="location" required>
          <mat-option *ngFor="let loc of locations" [value]="loc.id">{{ loc.name }}</mat-option>
        </mat-select>
      </mat-form-field>
      <div class="image-upload-group">
        <label>Imagen actual:</label>
        <img *ngIf="imagePreview" [src]="imagePreview" alt="Imagen actual" class="image-preview" />
        <input type="file" accept="image/*" (change)="onImageSelected($event)" />
      </div>
      <div class="form-actions">
        <button mat-stroked-button color="warn" type="button" (click)="close()" class="action-cancel">
          <mat-icon>cancel</mat-icon>
          <span>Cancelar</span>
        </button>
        <button mat-raised-button color="primary" type="submit" class="action-save">
          <mat-icon>check_circle</mat-icon>
          <span>Guardar cambios</span>
        </button>
      </div>
    </form>
  </div>
</div>
